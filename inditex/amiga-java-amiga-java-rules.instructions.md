---
description: Mandatory rules and best practices for Java development using Amiga Java Framework. Provides guidance for configuration, code, and workflow to ensure consistency and quality in Amiga Java projects.
author: AMIGA Java Team
version: 1.0
tags: ["amiga-java", "rules", "best-practices", "mandatory", "java", "spring-boot"]
globs: ["**/*.java", "pom.xml", "application*.yml"]
applyTo: "**/*.java,pom.xml,application*.yml"
---

# Amiga Java Framework configuration rules for cline

### Amiga Java Framework
  - Always prioritize Amiga Java Framework specific documentation over your general Spring Boot knowledge.
  - Always use Amiga Java framework over other frameworks like Spring, Spring Boot, etc.
  - Always use Amiga Java framework components over other alternative components (cache, http clients, databases, async consumers...).
  - Never use components that are marked as `deprecated` in Amiga Java documentation.
  - Consult the Amiga Framework specific documentation for each component prior to implementation.
  - Always use the `java_search` tool to retrieve official information, best practices, or documentation about Amiga Java Framework before making decisions or implementing features.


### Docker
  - Always use containerhub images instead of official Docker images.
  - Never infer the name of the images on Containerhub, always look them up.
  - Use docker client command version 2. For instance, `docker compose ps` instead of `docker-compose ps`.


### Maven
  - Always execute Maven commands from the `code` folder.
  - By default execute all Maven command with `--quiet` command line option. Only when you determine that more information about the build is needed, run again the Maven command line without the `--quiet` option.
  - Always start by reading `pom.xml` files for a better understanding of the project.
  - During the development, use the `-Damiga-javaformat.skip` maven commandline option when building or running tests
  - When is only needed to compile one module use the following pattern: `mvn clean compile --quiet -amd -pl <module-name>`
  - If you found a failure in the build of module <module-name> after the changes you can resume the build in the same module with: `mvn clean install --quiet -rf: <module-name>`
  - As the last step when everything is ready, use `mvn com.inditex.libamfmt:amiga-javaformat-maven-plugin:apply` to avoid style problems.
  - The Maven plugin `com.inditex.libamfmt:amiga-javaformat-maven-plugin:apply` is the code formatter, it must be used only as the last development step, when all the changes were done.
  - If the file `marker-ws-api-first-module.amiga` exists in a Maven module, this module contains autogenerated sources located at the relative path `target/generated-sources/openapi/src/gen/java/main`.
  - Use relative path: `target/generated-sources/openapi/src/gen/java/main` as sources directory for autogenerated classes.
  - When you need to boot the application use `mvn spring-boot:run` command line from the `code` folder.
  - To authenticate the test call to the application endpoints when the property `amiga.service.aaa.local.enable-local-test` is `true` use the JWT test token `eyJhbGciOiJIUzI1NiIsImtpZCI6ImxvY2FsLXRlc3QiLCJ0eXAiOiJKV1QifQ.eyJhdF9oYXNoIjoiRlIwY1ZrNjFIRk40ZUJtek5KbmJRdyIsImxhc3ROYW1lIjoibGFzdE5hbWUiLCJzdWIiOiJ1c2VybmFtZTMwMCIsImF1ZGl0VHJhY2tpbmdJZCI6IjczMDg1MWI3LTRlMmYtNGRmZS05MGJjLWNiY2RjZTUzMDM5ZS0xNjgyNiIsImlzcyI6Imh0dHBzOi8vYXhwcnVlY3pmYW0wMWxiLmNlbnRyYWwuaW5kaXRleC5ncnA6NDQzL29wZW5hbS9vYXV0aDIvemEvcHJlaW50IiwidG9rZW5OYW1lIjoiaWRfdG9rZW4iLCJ1c2VySWQiOiJ1c2VybmFtZTMwMCIsImF1ZCI6InRlc3QiLCJpZGVudGl0eVR5cGUiOiJSIiwiYXpwIjoidGVzdCIsInNjb3BlIjoidGVzdCIsImF1dGhfdGltZSI6MTUzMDc5NDUyOCwibmFtZSI6Im5hbWUiLCJyZWFsbSI6InRlc3QiLCJ1c2VyVHlwZSI6ImFkbWluIiwiYXV0aE1ldGhvZCI6IkxlZ2FjeS5aYXJhLlNlc3Npb25Ub2tlbiIsImV4cCI6MjAzMDc5NzIyOCwidG9rZW5UeXBlIjoiSldUVG9rZW4iLCJicmFuZCI6InphIiwiaWF0IjoxNTMwNzk0NTI4LCJhdXRoTGV2ZWwiOjEsImFjdHVhdG9yIjoidHJ1ZSJ9.n0n66FpyPjxjIYPdchcKljEenf5gfKv88jI_9qu0Ryk` as Bearer token.
    
### Java code
  - Write code and code comments always in English.
  - Create Javadoc documentation for all public classes, public methods, and when relevant, for public fields.
  - Use code style rules configured in the project when generating new code.
  - When you don't find a file, always check if it could be an auto-generated file in relative path `target/generated-sources`.
  - Check the `java.version` property in the POM to choose which Java language level you must use when writing code. Prefer to use Java 21 idiomatic code when possible.
  - You could use Project Lombok annotations when needed.
  - Use Mapstruct mappers to map between data objects or records.
  - The main class is the one annotated by either `AmigaBootServiceApplication ` or `AmigaBootBatchApplication`. You should not annotate another class with `@SpringBootApplication`.
  - You MUST use as base package the one used in the main class application.
  - The annotations `org.springframework.cache.annotation.EnableCaching` and `org.springframework.scheduling.annotation.EnableScheduling` MUST NEVER be used in any Java source file, as Amiga Java takes care of the features without the need of those annotations.

### Application Properties Configuration
  - When adding properties to configuration files, follow these guidelines:   
    - Include in `application-standalone.yml` the properties needed to configure all the components in the development cycle.
    - If some property has been already added in `application.yml`, override it in `application-standalone.yml` only if the modification is needed for the changes or features you are developing.

### In SQL Code
  - Write code and code comments always in English.
